import{j as e,a as p,H as f}from"./app-Cyxf_VO8.js";import{u as b,a as g,b as N,c as S,F as y,d as i,I as C,e as o,f as n,g as c,h as x,i as j,M as F,T as _,S as w,o as L,j as I,s as l,k as M,l as k}from"./MultiSelectCreatable-f2Zykr59.js";import{B as z}from"./createLucideIcon-B-OUBSw7.js";import{I as A}from"./input-DzyBtkh-.js";import{L as D}from"./loader-circle-D0uxoFGL.js";import{A as H}from"./app-layout-BLH8KRp1.js";import{d as T}from"./index-4Ns3tNZl.js";/* empty css            */import"./index-DqwN25Q5.js";import"./index-CmmYEwlv.js";import"./index-F9FZHLh3.js";import"./label-DXl-YsaQ.js";const U=L({name:l().min(2,{message:"Le nom doit contenir au moins 2 caractères."}),description:l().min(10,{message:"La description doit contenir au moins 10 caractères."}),is_active:k(),image:M().optional(),service_items:I(l().min(1,"L'élément ne peut pas être vide")).optional()});function B({service:r}){const t=!!r,m=b(),d=g(),u=t?d:m,a=N({resolver:S(U),defaultValues:{name:r?.name??"",description:r?.description??"",is_active:t?r.is_active:!0,service_items:r?.features?.map(s=>s)??[]}});function h(s){t&&r?d.mutate({id:r.id.toString(),data:s},{onSuccess:v=>{console.log("Service mis à jour :",v),p.visit("/company-services/home",{replace:!0})}}):(console.log("Création du service :",s),m.mutate(s,{onSuccess:()=>{p.visit("/company-services/home",{replace:!0})}}))}return e.jsx(y,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(h),className:"space-y-8 p-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(i,{control:a.control,name:"image",render:({field:s})=>e.jsx(C,{label:"Image du service",field:s,defaultImageUrl:r?.image})}),e.jsxs("div",{className:"w-3/4 space-y-4",children:[e.jsx(i,{control:a.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Nom du service"}),e.jsx(c,{children:e.jsx(A,{placeholder:"Nom du service...",...s})}),e.jsx(x,{children:"Nom public du service."}),e.jsx(j,{})]})}),e.jsx(i,{control:a.control,name:"service_items",render:({field:s})=>e.jsx(F,{name:"service_items",label:"Éléments du service",description:"Ajoutez les caractéristiques ou fonctionnalités de votre service",value:s.value||[],onChange:s.onChange})}),e.jsx(i,{control:a.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Description"}),e.jsx(c,{children:e.jsx(_,{placeholder:"Décrivez le service en détail...",className:"min-h-[120px]",...s})}),e.jsx(j,{})]})}),e.jsx(i,{control:a.control,name:"is_active",render:({field:s})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-base",children:"Service actif"}),e.jsx(x,{children:"Le service sera visible s’il est actif."})]}),e.jsx(c,{children:e.jsx(w,{checked:s.value,onCheckedChange:s.onChange})})]})})]})]}),e.jsxs(z,{type:"submit",disabled:u.isPending,children:[u.isPending&&e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Mettre à jour":"Créer le service"]})]})})}const E=[{title:"Tableau de bord",href:T().url},{title:"Services",href:"/company-services/home"},{title:"Creation d'un nouveau service"}];function Z(){return e.jsxs(H,{breadcrumbs:E,children:[e.jsx(f,{title:"Creation des services"}),e.jsxs("div",{className:"flex flex-col space-y-6 px-6",children:[e.jsx("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Creation d'un services"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les services proposés par votre entreprise"})]})}),e.jsx("div",{className:"rounded-lg border bg-card",children:e.jsx(B,{})})]})]})}export{Z as default};
