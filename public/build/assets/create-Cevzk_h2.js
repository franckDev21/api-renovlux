import{j as e,a as p,H as f}from"./app-BMoqJylX.js";import{u as b,a as g,F as N,b as a,I as S,c as o,d as n,e as c,f as x,g as j,T as y,S as C,o as F,h as w,i as _,j as L,s as l}from"./ImageUploadField-CdfPEnSx.js";import{B as I}from"./createLucideIcon-D3zDqMh4.js";import{I as M}from"./input-C3OrCww6.js";import{u as k,a as z,M as A}from"./MultiSelectCreatable-CNMybMR1.js";import{L as D}from"./loader-circle-ZU7CQ3Zi.js";import{A as H}from"./app-layout-DnDd30U-.js";import{d as T}from"./index-4Ns3tNZl.js";/* empty css            */import"./index-CurEjbES.js";import"./index-BnYqguIk.js";import"./index-ChexgZ0g.js";import"./label-Kl6CMLY9.js";import"./useMutation-Dc7l1O7O.js";const U=F({name:l().min(2,{message:"Le nom doit contenir au moins 2 caractères."}),description:l().min(10,{message:"La description doit contenir au moins 10 caractères."}),is_active:L(),image:_().optional(),service_items:w(l().min(1,"L'élément ne peut pas être vide")).optional()});function B({service:r}){const t=!!r,m=k(),d=z(),u=t?d:m,i=b({resolver:g(U),defaultValues:{name:r?.name??"",description:r?.description??"",is_active:t?r.is_active:!0,service_items:r?.features?.map(s=>s)??[]}});function h(s){t&&r?d.mutate({id:r.id.toString(),data:s},{onSuccess:v=>{console.log("Service mis à jour :",v),p.visit("/company-services/home",{replace:!0})}}):(console.log("Création du service :",s),m.mutate(s,{onSuccess:()=>{p.visit("/company-services/home",{replace:!0})}}))}return e.jsx(N,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(h),className:"space-y-8 p-4",children:[e.jsxs("div",{className:"flex md:flex-row flex-col items-start space-x-4",children:[e.jsx(a,{control:i.control,name:"image",render:({field:s})=>e.jsx(S,{label:"Image du service",field:s,defaultImageUrl:r?.image})}),e.jsxs("div",{className:"w-full md:w-3/4 space-y-4",children:[e.jsx(a,{control:i.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Nom du service"}),e.jsx(c,{children:e.jsx(M,{placeholder:"Nom du service...",...s})}),e.jsx(x,{children:"Nom public du service."}),e.jsx(j,{})]})}),e.jsx(a,{control:i.control,name:"service_items",render:({field:s})=>e.jsx(A,{name:"service_items",label:"Éléments du service",description:"Ajoutez les caractéristiques ou fonctionnalités de votre service",value:s.value||[],onChange:s.onChange})}),e.jsx(a,{control:i.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(n,{children:"Description"}),e.jsx(c,{children:e.jsx(y,{placeholder:"Décrivez le service en détail...",className:"min-h-[120px]",...s})}),e.jsx(j,{})]})}),e.jsx(a,{control:i.control,name:"is_active",render:({field:s})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{className:"text-base",children:"Service actif"}),e.jsx(x,{children:"Le service sera visible s’il est actif."})]}),e.jsx(c,{children:e.jsx(C,{checked:s.value,onCheckedChange:s.onChange})})]})})]})]}),e.jsxs(I,{type:"submit",disabled:u.isPending,children:[u.isPending&&e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Mettre à jour":"Créer le service"]})]})})}const E=[{title:"Tableau de bord",href:T().url},{title:"Services",href:"/company-services/home"},{title:"Creation d'un nouveau service"}];function ee(){return e.jsxs(H,{breadcrumbs:E,children:[e.jsx(f,{title:"Creation des services"}),e.jsxs("div",{className:"flex flex-col space-y-6 px-6",children:[e.jsx("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Creation d'un services"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les services proposés par votre entreprise"})]})}),e.jsx("div",{className:"rounded-lg border bg-card",children:e.jsx(B,{})})]})]})}export{ee as default};
