import{u as p,a as n}from"./useMutation-Snm-uatt.js";import{b as s,u as c}from"./app-CXlkSNpp.js";import{t as o}from"./app-layout-BAa8lCS0.js";const a="/api/projects",d=async(e={})=>{const r=new URLSearchParams;return e.search&&r.append("search",e.search),(e.sortBy||e.sort_by)&&r.append("sort_by",e.sortBy||e.sort_by||"created_at"),(e.sortOrder||e.sort_order)&&r.append("sort_order",e.sortOrder||e.sort_order||"desc"),e.page&&r.append("page",String(e.page)),(e.perPage||e.per_page)&&r.append("per_page",String(e.perPage||e.per_page||15)),(await s.get(`${a}?${r.toString()}`)).data},y=async e=>(await s.get(`${a}/${e}`)).data.data,g=async e=>(await s.post(a,e,{headers:{"Content-Type":"multipart/form-data"}})).data.data,m=async(e,r)=>(await s.post(`${a}/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data.data,_=async e=>{await s.delete(`${a}/${e}`)},i=e=>{const r=new FormData;return r.append("title",e.title),r.append("description",e.description||""),r.append("category_id",String(e.category_id)),e.image instanceof File&&r.append("image",e.image),e.existing_secondary_images&&e.existing_secondary_images.length>0&&e.existing_secondary_images.forEach(t=>{typeof t=="string"&&r.append("existing_secondary_images[]",t)}),e.secondary_images&&e.secondary_images.length>0&&e.secondary_images.forEach(t=>{t instanceof File&&r.append("secondary_images[]",t)}),r.append("existing_secondary_images_submitted","true"),r},l=(e={})=>p({queryKey:["projects",e],queryFn:async()=>await d(e)}),E=e=>p({queryKey:["project",e],queryFn:()=>y(e),enabled:!!e}),q=()=>{const e=c();return n({mutationFn:r=>{const t=i(r);return g(t)},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),o.success("Projet créé avec succès")},onError:r=>{console.error("Error creating project:",r),o.error("Erreur lors de la création du projet")}})},F=()=>{const e=c();return n({mutationFn:({id:r,data:t})=>{const u=i(t);return m(r,u)},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["project"]}),o.success("Projet mis à jour avec succès")},onError:r=>{console.error("Error updating project:",r),o.error("Erreur lors de la mise à jour du projet")}})},S=()=>{const e=c();return n({mutationFn:r=>_(r),onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),o.success("Projet supprimé avec succès")},onError:r=>{console.error("Error deleting project:",r),o.error("Erreur lors de la suppression du projet")}})};export{q as a,F as b,S as c,l as d,E as u};
