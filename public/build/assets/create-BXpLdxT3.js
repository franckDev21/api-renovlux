import{j as e,a as u,H as v}from"./app-GeuNv2U7.js";import{u as b,a as g,b as N,c as S,F as y,d as t,I as F,e as o,f as c,g as n,h as x,i as p,T as C,S as w,o as I,j as L,k as _,s as j}from"./useServices-CB--JL-8.js";import{B as k}from"./createLucideIcon-qm2xpo58.js";import{I as M}from"./input-DroGl5VL.js";import{L as D}from"./loader-circle-Dj50IK_Q.js";import{A as H}from"./app-layout-cqTJQ3KW.js";import{d as T}from"./index-4Ns3tNZl.js";/* empty css            */import"./index-BeS1Fj6_.js";import"./index-Cn5BLyUM.js";import"./index-DQo6JsRl.js";import"./label-BpM_bxwD.js";const U=I({name:j().min(2,{message:"Le nom doit contenir au moins 2 caractères."}),description:j().min(10,{message:"La description doit contenir au moins 10 caractères."}),is_active:_(),image:L().optional()});function z({service:r}){const i=!!r,l=b(),m=g(),d=i?m:l,a=N({resolver:S(U),defaultValues:{name:r?.name??"",description:r?.description??"",is_active:i?r.is_active:!0}});function h(s){i&&r?m.mutate({id:r.id.toString(),data:s},{onSuccess:f=>{console.log("Service mis à jour :",f),u.visit("/company-services/home",{replace:!0})}}):l.mutate(s,{onSuccess:()=>{u.visit("/company-services/home",{replace:!0})}})}return e.jsx(y,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(h),className:"space-y-8 p-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(t,{control:a.control,name:"image",render:({field:s})=>e.jsx(F,{label:"Image du service",field:s,defaultImageUrl:r?.image})}),e.jsxs("div",{className:"w-3/4 space-y-4",children:[e.jsx(t,{control:a.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Nom du service"}),e.jsx(n,{children:e.jsx(M,{placeholder:"Nom du service...",...s})}),e.jsx(x,{children:"Nom public du service."}),e.jsx(p,{})]})}),e.jsx(t,{control:a.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Description"}),e.jsx(n,{children:e.jsx(C,{placeholder:"Décrivez le service en détail...",className:"min-h-[120px]",...s})}),e.jsx(p,{})]})}),e.jsx(t,{control:a.control,name:"is_active",render:({field:s})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base",children:"Service actif"}),e.jsx(x,{children:"Le service sera visible s’il est actif."})]}),e.jsx(n,{children:e.jsx(w,{checked:s.value,onCheckedChange:s.onChange})})]})})]})]}),e.jsxs(k,{type:"submit",disabled:d.isPending,children:[d.isPending&&e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Mettre à jour":"Créer le service"]})]})})}const A=[{title:"Tableau de bord",href:T().url},{title:"Services",href:"/company-services/home"},{title:"Creation d'un nouveau service"}];function X(){return e.jsxs(H,{breadcrumbs:A,children:[e.jsx(v,{title:"Creation des services"}),e.jsxs("div",{className:"flex flex-col space-y-6 px-6",children:[e.jsx("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Creation d'un services"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les services proposés par votre entreprise"})]})}),e.jsx("div",{className:"rounded-lg border bg-card",children:e.jsx(z,{})})]})]})}export{X as default};
